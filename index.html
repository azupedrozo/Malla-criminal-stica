<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Licenciatura en Criminalística</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4e2db;
      color: #5c161c;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #c02a30;
      color: white;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
    }
    header img {
      height: 50px;
    }
    h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      padding: 1rem;
      gap: 1rem;
      justify-content: center;
    }
    .year-column {
      background-color: #fff;
      border: 2px solid #af7e80;
      border-radius: 10px;
      padding: 1rem;
      width: 300px;
    }
    .year-column h2 {
      text-align: center;
      background-color: #af7e80;
      color: white;
      padding: 0.5rem;
      border-radius: 5px;
      font-size: 1rem;
    }
    .subject {
      margin: 0.5rem 0;
      padding: 0.5rem;
      border: 1px solid #af7e80;
      border-radius: 5px;
      background-color: #fff;
      cursor: pointer;
      position: relative;
    }
    .subject.completed {
      text-decoration: line-through;
      background-color: #dcdcdc;
    }
    .subject.locked {
      background-color: #f8d7da;
      cursor: not-allowed;
      color: #999;
    }
    .subject:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 0;
      background: #333;
      color: #fff;
      padding: 5px;
      font-size: 0.8rem;
      white-space: pre-wrap;
      border-radius: 5px;
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAw1BMVEX///8aXZZfn3IATY5QmGYAUI... (recortado por longitud) ..." alt="Logo Universidad">
    <h1>Malla Interactiva - Licenciatura en Criminalística</h1>
  </header>

  <div class="container" id="malla"></div>

  <script>
    const subjects = [
      { name: "Introducción a la Criminalística", id: 1, ciclo: 1, cuatri: 1, req: [] },
      { name: "Matemática", id: 2, ciclo: 1, cuatri: 1, req: [] },
      { name: "Química General", id: 3, ciclo: 1, cuatri: 1, req: [] },
      { name: "Taller de Alfabetización Académica", id: 4, ciclo: 1, cuatri: 1, req: [] },
      { name: "Inglés I", id: 5, ciclo: 1, cuatri: 1, req: [] },
      { name: "Criminalística", id: 6, ciclo: 1, cuatri: 2, req: [1] },
      { name: "Derecho Constitucional", id: 7, ciclo: 1, cuatri: 2, req: [] },
      { name: "Física I", id: 8, ciclo: 1, cuatri: 2, req: [2] },
      { name: "Fotografía Pericial y Técnicas Audiovisuales", id: 9, ciclo: 1, cuatri: 2, req: [1] },
      { name: "Informática", id: 10, ciclo: 1, cuatri: 2, req: [] },
      { name: "Documentología I", id: 11, ciclo: 2, cuatri: 1, req: [1] },
      { name: "Derecho Civil y Comercial", id: 12, ciclo: 2, cuatri: 1, req: [7] },
      { name: "Química Orgánica I", id: 13, ciclo: 2, cuatri: 1, req: [3] },
      { name: "Dibujo Pericial", id: 14, ciclo: 2, cuatri: 1, req: [] },
      { name: "Inglés II", id: 15, ciclo: 2, cuatri: 1, req: [10] },
      { name: "Física II", id: 16, ciclo: 2, cuatri: 2, req: [8] },
      { name: "Accidentología", id: 17, ciclo: 2, cuatri: 2, req: [1] },
      { name: "Estadística", id: 18, ciclo: 2, cuatri: 2, req: [2] },
      { name: "Derecho Penal", id: 19, ciclo: 2, cuatri: 2, req: [12] },
      { name: "Portugués I", id: 20, ciclo: 2, cuatri: 2, req: [] },
      { name: "Documentología II", id: 21, ciclo: 3, cuatri: 1, req: [11] },
      { name: "Derecho Procesal", id: 22, ciclo: 3, cuatri: 1, req: [19] },
      { name: "Técnicas de Identificación Humana", id: 23, ciclo: 3, cuatri: 1, req: [9, 13] },
      { name: "Las TICS en la Criminalística", id: 24, ciclo: 3, cuatri: 1, req: [5] },
      { name: "Química Orgánica II", id: 25, ciclo: 3, cuatri: 1, req: [13] },
      { name: "Accidentología II", id: 26, ciclo: 3, cuatri: 2, req: [17] },
      { name: "Balística I", id: 27, ciclo: 3, cuatri: 2, req: [1] },
      { name: "Psicología Criminal", id: 28, ciclo: 3, cuatri: 2, req: [] },
      { name: "Prevención en Seguridad Vial y Medio Ambiente", id: 29, ciclo: 3, cuatri: 2, req: [17] },
      { name: "Taller de Practica Profesional", id: 30, ciclo: 3, cuatri: 2, req: [17, 21, 22, 23] },
      { name: "Balística II", id: 31, ciclo: 4, cuatri: 1, req: [27] },
      { name: "Accidentología III", id: 32, ciclo: 4, cuatri: 1, req: [26] },
      { name: "Toxicología", id: 33, ciclo: 4, cuatri: 1, req: [25] },
      { name: "Portugués II", id: 34, ciclo: 4, cuatri: 1, req: [20] },
      { name: "Metodología de la Investigación", id: 35, ciclo: 4, cuatri: 1, req: [18] },
      { name: "Deontología Profesional", id: 36, ciclo: 4, cuatri: 2, req: [] },
      { name: "Práctica Profesional Supervisada", id: 37, ciclo: 4, cuatri: 2, req: [21, 23, 32] },
      { name: "Taller de Trabajo Integrador Final", id: 38, ciclo: 4, cuatri: 2, req: [21, 25, 31, 32, 35] }
    ];

    const completed = JSON.parse(localStorage.getItem("aprobadas")) || [];

    function saveProgress() {
      localStorage.setItem("aprobadas", JSON.stringify(completed));
    }

    function render() {
      const container = document.getElementById("malla");
      container.innerHTML = "";
      for (let ciclo = 1; ciclo <= 4; ciclo++) {
        const cuatri1 = subjects.filter(s => s.ciclo === ciclo && s.cuatri === 1);
        const cuatri2 = subjects.filter(s => s.ciclo === ciclo && s.cuatri === 2);

        const col = document.createElement("div");
        col.className = "year-column";
        col.innerHTML = `<h2>${ciclo}° Año - 1er y 2do Cuatrimestre</h2>`;

        [...cuatri1, ...cuatri2].forEach(subj => {
          const div = document.createElement("div");
          div.className = "subject";
          div.textContent = subj.name;

          const isUnlocked = subj.req.every(r => completed.includes(r));
          const isDone = completed.includes(subj.id);

          if (!isUnlocked) {
            div.classList.add("locked");
            const faltan = subj.req.filter(r => !completed.includes(r));
            div.setAttribute("data-tooltip", `Requiere: ${faltan.map(id => subjects.find(s => s.id === id).name).join(", ")}`);
          } else {
            div.onclick = () => {
              if (isDone) {
                completed.splice(completed.indexOf(subj.id), 1);
              } else {
                completed.push(subj.id);
              }
              saveProgress();
              render();
            };
          }

          if (isDone) div.classList.add("completed");
          col.appendChild(div);
        });

        container.appendChild(col);
      }
    }

    render();
  </script>
</body>
</html>
